// REPLACE START: app.js 全站腳本（中英切換、主題、導覽、首頁篩選 demo）
(function(){const $=s=>document.querySelector(s),$$=s=>document.querySelectorAll(s);const LS_THEME='site_theme',LS_LANG='site_lang';const state={lang:localStorage.getItem(LS_LANG)||'zh',theme:localStorage.getItem(LS_THEME)||'light'};document.documentElement.setAttribute('data-theme',state.theme==='dark'?'dark':'');const i18n={zh:{brand:'衣衫新生｜傳統服飾轉型',home:'首頁',clothing:'服裝',men:'男裝',women:'女裝',kids:'童裝',seniors:'老人裝',services:'服務',about:'關於我們',contact:'聯繫我們',lang:'中/英',theme:'日夜',heroTitle:'讓你的傳統實體店，<strong>無痛升級</strong>直播與線上銷售',heroLead:'一套模組：蝦皮、抖音、小紅書 同步導流｜直播腳本｜上架範本｜倉庫流程｜金物流接軌',filterStyle:'風格',filterSearch:'搜尋商品',styles:'全部,休閒,街頭,正式,運動,傳統',badge:'轉型中',add:'加入詢問車',empty:'無符合條件的商品'},en:{brand:'ReNew Threads｜Retail-to-Live Commerce',home:'Home',clothing:'Clothing',men:'Men',women:'Women',kids:'Kids',seniors:'Seniors',services:'Services',about:'About',contact:'Contact',lang:'ZH/EN',theme:'Theme',heroTitle:'Transform your brick-and-mortar into <strong>live-commerce ready</strong>',heroLead:'One toolkit: Shopee, TikTok, RED routing｜Live scripts｜Listing templates｜Ops playbooks｜Payments & Logistics',filterStyle:'Style',filterSearch:'Search products',styles:'All,Casual,Street,Formal,Sport,Traditional',badge:'Transition',add:'Add to Inquiry',empty:'No matching products'}};function applyLang(){const t=i18n[state.lang];$$('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n');if(k&&t[k])el.innerHTML=t[k]});}function setLang(lang){state.lang=lang;localStorage.setItem(LS_LANG,lang);applyLang()}function toggleTheme(){state.theme=state.theme==='dark'?'light':'dark';localStorage.setItem(LS_THEME,state.theme);document.documentElement.setAttribute('data-theme',state.theme==='dark'?'dark':'');}
document.addEventListener('click',e=>{const m=$('.mobile-drawer');if(e.target.matches('#btn-hamburger')){m.classList.add('open')}else if(e.target.matches('.mobile-close')){m.classList.remove('open')}});
window.Site={setLang,toggleTheme};
document.addEventListener('DOMContentLoaded',()=>{applyLang();const sSel=$('#styleSelect');const qInp=$('#q');if(!sSel||!qInp) return;const data=[{id:1,name:'街頭寬版 T',style:'街頭',cat:'男裝',img:'https://picsum.photos/seed/a/600/400'},{id:2,name:'復古旗袍上衣',style:'傳統',cat:'女裝',img:'https://picsum.photos/seed/b/600/400'},{id:3,name:'親子運動套裝',style:'運動',cat:'童裝',img:'https://picsum.photos/seed/c/600/400'},{id:4,name:'亞麻休閒襯衫',style:'休閒',cat:'男裝',img:'https://picsum.photos/seed/d/600/400'},{id:5,name:'商務西裝外套',style:'正式',cat:'男裝',img:'https://picsum.photos/seed/e/600/400'},{id:6,name:'舒柔長裙',style:'休閒',cat:'女裝',img:'https://picsum.photos/seed/f/600/400'},{id:7,name:'涼感運動衣',style:'運動',cat:'老人裝',img:'https://picsum.photos/seed/g/600/400'},{id:8,name:'傳統峇迪花紋襯衫',style:'傳統',cat:'男裝',img:'https://picsum.photos/seed/h/600/400'}];
const grid=$('#productGrid');const catChk=$$('[name="cat"]');function render(){const lang=state.lang;const t=i18n[lang];let s=sSel.value;let q=qInp.value.trim().toLowerCase();let cats=[...catChk].filter(x=>x.checked).map(x=>x.value);let list=data.filter(it=>(s==='全部'||s==='All'||it.style===s)||(s==='Traditional'&&it.style==='傳統')||(s==='Casual'&&it.style==='休閒')||(s==='Street'&&it.style==='街頭')||(s==='Formal'&&it.style==='正式')||(s==='Sport'&&it.style==='運動'));list=list.filter(it=>cats.length?cats.includes(it.cat):true).filter(it=>!q||it.name.toLowerCase().includes(q));grid.innerHTML=list.length?list.map(it=>`<div class="card"><img src="${it.img}" alt=""><div class="p"><div class="badge" data-i18n="badge">${t.badge}</div><h4 style="margin:8px 0">${it.name}</h4><div style="display:flex;gap:8px;color:var(--muted);font-size:12px"><span>${it.style}</span><span>·</span><span>${it.cat}</span></div><div style="margin-top:10px;display:flex;gap:8px"><button class="btn" aria-label="${t.add}">${t.add}</button></div></div></div>`).join(''):`<div class="alert">${t.empty}</div>`;}const styles=(i18n[state.lang].styles||'').split(',');if(sSel&&styles.length){sSel.innerHTML=styles.map(v=>`<option>${v}</option>`).join('')}{/* keep */}render();sSel.addEventListener('change',render);qInp.addEventListener('input',render);catChk.forEach(c=>c.addEventListener('change',render));});})();
// REPLACE END: app.js
